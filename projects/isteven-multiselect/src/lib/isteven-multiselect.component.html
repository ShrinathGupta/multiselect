<div class="isteven-wrapper">
  <button class="dropdown-button" (click)="isOpen = !isOpen">
    <div class="selection">
      <!-- TODO: None selected template should be ng-template -->
      <div class="none-selected" *ngIf="!isValueSelected()">
        None selected
      </div>
      <div class="selected" *ngIf="isValueSelected()">
        <span class="text">{{_selectedOptions | displaySelectedValue: showMaxLabels}}</span>
        <span class="caret" (click)="clear()">X</span>
      </div>
    </div>
  </button>
  <div class="listing-wrapper" *ngIf="isOpen">
    <im-helper-elements [multiple]="multiple" (resetClicked)="reset()" (selectAllClicked)="selectAll()"
      (selectNoneClicked)="selectNone()">
    </im-helper-elements>
    <im-filter-options (filterOptionsList)="filterOptionsList($event)"></im-filter-options>
    <ng-container *ngIf="!groupedProperty else groupedTemplate">
      <im-options [itemTemplate]="itemTemplate" [options]="_options" [disabled]="disabled" (selectOption)="select($event)"></im-options>
    </ng-container>
  </div>
</div>
<ng-template #groupedTemplate>
  <im-grouped-options [options]="_options" [disabled]="disabled" [groupedProperty]="groupedProperty" (selectOption)="select($event)" (selectGroup)="selectGroup($event)"></im-grouped-options>
</ng-template>
<ng-template #defaultTemplate let-getOptionStyle="getOptionStyle" let-options="options" let-trackByOption="trackByOption" let-select="select">
  <div class="option" [ngClass]="getOptionStyle(option)" *ngFor="let option of options;trackBy:trackByOption" (click)="select(option)">
    {{option.name}}
  </div>
</ng-template>